pipeline {
    agent any

    stages {
        stage('SCM') {
            steps {
                git branch: '*/conversion-to-playwright',
                    credentialsId: 'admingithub',
                    url: 'git@github.com/gem-vivek-khurana/SerenityBDDMavenJunitJavaReflection.git',
                    poll: false
            }
        }

        stage('Maven_Build') {
            agent {
                label 'maven_runner_java11'
            }
            steps {
                container('maven-runner-11') {
                    dir('rpasrer_testing') {
                        script {
                            sh 'rm -rf target'
                            sh 'mvn clean test'
                        }
                    }
                }
            }
        }
    }
}
